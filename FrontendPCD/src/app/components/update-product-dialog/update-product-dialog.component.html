<div class="split-container">
  <div class="split-left">
<section>
  <h2> Modifier un produit</h2>

  <form #produitForm="ngForm" (submit)="updateProduit()">
    <div mat-dialog-content>
      <mat-form-field>
        <input matInput type="text" id="nom" name="nom" [(ngModel)]="prod.nom" [required]="true">
        <mat-label>Nom</mat-label>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="number" id="prix" name="prix" [(ngModel)]="prod.prix" [required]="true">
        <mat-label>Prix</mat-label>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="number" id="quantite" name="quantite" [(ngModel)]="prod.quantite" [required]="true">
        <mat-label>Quantité</mat-label>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Catégorie</mat-label>
        <select matNativeControl id="categorie" name="categorie" (change)="selectCat($event)" [(ngModel)]="prod.categorie.id" [required]="true" >
          <option *ngFor="let cat of categories" [value]="cat.id" >{{ cat.nom }}</option>
        </select>
      </mat-form-field>
     
      
       <div>      
          <label>Photo</label>
        <input  #myInput type="file" id="photo" name="photo" (change)="onPhotoSelected($event)" [(ngModel)]="photo" required>
      </div>
    <div mat-dialog-actions>
      <button mat-raised-button color="primary"  type="submit"(click)="onCancel()" >Modifier</button>
      <button mat-raised-button mat-dialog-close>Annuler</button>
    </div>
   </div>
  </form>
</section></div>
<div class="split-right">
</div>
<div>
  <div class="card" style="width: 18rem;">
    <img class="card-img-top" *ngIf="img; else imgSubst" [src]="img" alt="Photo du produit" width="50" height= "170" alt="Card image cap">
    <ng-template #imgSubst>
      <img class="card-img-top" src="http://localhost:8080/apiproduit/getimage/{{prod.id}}" alt="Image de substitution" width="50" height="170" alt="Card image cap">
    </ng-template>
      <div class="card-body">
        <h5 class="card-title">{{prod.nom}}</h5>
        <h6 style="color:red">

          {{prod.prix}} DT
        </h6>
        <h6 style="color: green" *ngIf="prod.quantite>0; else repture">
          En Stock
        </h6>
        <p> <a class="btn btn-primary" id="btn">Acheter Maintenant</a>
        </p>
      <ng-template #repture><h6 style="color: brown"> Rupture de Stock</h6>
      </ng-template>
      </div>
    </div> 
</div>